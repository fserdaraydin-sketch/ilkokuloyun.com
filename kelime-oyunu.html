<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kelime SÄ±ralama Oyunu</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { -webkit-tap-highlight-color: transparent; }
    body { overscroll-behavior: none; touch-action: manipulation; }
    .chip { user-select: none; }
    .dragging { opacity: .6; transform: scale(.98); }
    .drop-slot { min-height: 48px; }
    .drop-active { outline: 2px dashed rgba(99,102,241,.7); outline-offset: 4px; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-400 via-violet-400 to-pink-400">
  <div class="max-w-4xl mx-auto px-4 py-6">
    <header class="mb-4 flex items-center justify-between gap-3">
      <h1 class="text-2xl md:text-3xl font-extrabold text-white drop-shadow">ğŸ”¤ Kelime SÄ±ralama Oyunu</h1>
      <a href="index.html" class="hidden md:inline-flex items-center gap-2 px-4 py-2 rounded-full text-white font-bold bg-black/20 hover:bg-black/30">â† Ana Sayfa</a>
    </header>

    <!-- Kontroller -->
    <section class="bg-white/95 rounded-2xl shadow-xl p-4 md:p-5 mb-5">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
        <div class="flex flex-col">
          <label class="text-sm text-gray-600 mb-1 font-semibold">Seviye</label>
          <select id="seviye" class="px-4 py-3 rounded-xl border-2 border-violet-300 focus:outline-none focus:ring-2 focus:ring-violet-400">
            <option value="kolay">Kolay (2 kelime)</option>
            <option value="orta">Orta (3 kelime)</option>
            <option value="zor">Zor (4 kelime)</option>
            <option value="cokzor">Ã‡ok Zor (5 kelime)</option>
          </select>
        </div>

        <div class="flex flex-col">
          <label class="text-sm text-gray-600 mb-1 font-semibold">Alt AÅŸama (Kolay/Orta)</label>
          <select id="altAsama" class="px-4 py-3 rounded-xl border-2 border-emerald-300 focus:outline-none focus:ring-2 focus:ring-emerald-400">
            <option value="diffFirst">1) Ä°lk harfler farklÄ±</option>
            <option value="sameFirstDiffSecond">2) Ä°lk harf aynÄ±, ikinci farklÄ±</option>
            <option value="sameFirst3">3) Ä°lk Ã¼Ã§ harf aynÄ±</option>
          </select>
          <p class="text-xs text-gray-500 mt-1">Zor / Ã‡ok Zor seviyede alt aÅŸama otomatik.</p>
        </div>

        <div class="flex flex-col">
          <label class="text-sm text-gray-600 mb-1 font-semibold">DuyarlÄ±lÄ±k</label>
          <select id="duyarlilik" class="px-4 py-3 rounded-xl border-2 border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-400">
            <option value="base">Harf farkÄ± yok (A=a)</option>
            <option value="variant">BÃ¼yÃ¼k/KÃ¼Ã§Ã¼k duyarlÄ±</option>
          </select>
        </div>

        <div class="flex items-end gap-2">
          <button id="btnYeni" class="flex-1 px-4 py-3 rounded-xl font-bold bg-violet-600 text-white active:bg-violet-700">Yeni Soru</button>
          <button id="btnKaristir" class="px-4 py-3 rounded-xl font-bold bg-fuchsia-600 text-white active:bg-fuchsia-700">KaynaÄŸÄ± KarÄ±ÅŸtÄ±r</button>
        </div>
      </div>
    </section>

    <!-- GÃ¶rev Bilgisi -->
    <section class="bg-white rounded-2xl shadow-2xl p-4 md:p-6 mb-4">
      <div id="gorev" class="text-gray-700 text-sm md:text-base">
        <strong>GÃ¶rev:</strong> Ãœstte verilen kelimeleri alttaki kutulara <em>soldan saÄŸa</em> doÄŸru <strong>sÃ¶zlÃ¼k sÄ±rasÄ±na</strong> gÃ¶re yerleÅŸtir.
      </div>
    </section>

    <!-- Oyun AlanÄ± -->
    <section class="bg-white rounded-2xl shadow-2xl p-4 md:p-6">
      <!-- Kaynak kelimeler (Ã¼stte) -->
      <div>
        <div class="text-slate-600 text-sm mb-2 font-semibold">Verilen kelimeler</div>
        <div id="kaynak" class="flex flex-wrap gap-2 mb-5"></div>
      </div>

      <!-- Hedef slotlar (altta) -->
      <div>
        <div class="text-slate-600 text-sm mb-2 font-semibold">SÃ¼rÃ¼kleyip bÄ±rak: (sol â†’ saÄŸ)</div>
        <div id="hedef" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3"></div>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-6">
        <button id="btnKontrol" class="px-4 py-3 rounded-xl font-bold bg-emerald-600 text-white active:bg-emerald-700">Kontrol Et</button>
        <button id="btnCozum" class="px-4 py-3 rounded-xl font-bold bg-amber-500 text-white active:bg-amber-600">Ã‡Ã¶zÃ¼mÃ¼ GÃ¶ster</button>
        <button id="btnTemizle" class="px-4 py-3 rounded-xl font-bold bg-sky-600 text-white active:bg-sky-700">KutularÄ± Temizle</button>
        <button id="btnYeni2" class="px-4 py-3 rounded-xl font-bold bg-indigo-600 text-white active:bg-indigo-700">Yeni Soru</button>
      </div>

      <div id="sonuc" class="mt-4 text-center text-lg font-bold"></div>
    </section>

    <footer class="text-center text-white/90 mt-6">âœ¨ SÃ¶zlÃ¼k sÄ±rasÄ± <code>localeCompare('tr')</code> ile kontrol edilir. âœ¨</footer>
  </div>

  <script>
    // --- Kelime BankasÄ± (Ã¶zet) ---
    const WORDS = [
      "araba","armut","arÄ±","arka","arÅŸiv","artÄ±","aÄŸaÃ§","aÄŸÄ±r","aÄŸrÄ±","aÄŸÄ±z","alÄ±ÅŸ","altÄ±n","ayak","ayÄ±n","ayna","ayva",
      "bal","balÄ±k","balon","balkon","bambaÅŸka","bambu","bana","banka","baÅŸak","baÅŸarÄ±","baÅŸlÄ±k",
      "biber","bilet","bina","bir","bisiklet","bitki",
      "cami","cam","cambaz","ceviz","ceza","cezve",
      "Ã§adÄ±r","Ã§akÄ±l","Ã§anta","Ã§arÅŸÄ±","Ã§arpÄ±m","Ã§ay","Ã§iÃ§ek","Ã§ilek",
      "daÄŸ","dahi","dakika","dal","damla","dantel",
      "deÄŸer","denk","deniz","dere","dergi",
      "el","elbise","elma","elmas","elektrik",
      "fener","fikir","fidan","fil","fincan","fÄ±rÄ±n","fÄ±stÄ±k",
      "gemi","geniÅŸ","gerÃ§ek","gezi","gÃ¶l","gÃ¶kyÃ¼zÃ¼","gÃ¶z","gÃ¶zlÃ¼k",
      "harf","harita","hava","havuÃ§","hayal","hayat","hÄ±zlÄ±","hiÃ§","hikaye","horoz",
      "Ä±ÅŸÄ±k","Ä±spanak","Ä±sÄ±","Ä±zgara","Ä±rmak",
      "inek","insan","ip","iplik","isim","istanbul","iz","izci",
      "kalem","kale","kalp","kamyon","kanat","kar","karar","karÄ±nca","kargo","kardeÅŸ","kare","karpuz","kartal",
      "kasa","katalog","katÄ±","katman","katkÄ±",
      "kedi","kek","kelebek","kemik","keman",
      "kÄ±ÅŸ","kÄ±sa","kÄ±sÄ±m","kÄ±sÄ±t","kÄ±rmÄ±zÄ±","kÄ±rlangÄ±Ã§","kÄ±rk",
      "kiÅŸi","kil","kilim","kilo","kilit","kim","kimlik","kir","kiraz","kirli",
      "kitap","kol","kola","koli","kolye","koltuk","konu","konuk","konut","konum",
      "kÃ¶y","kÃ¶pek","kÃ¶prÃ¼","kÃ¶fte","kÃ¶r","kÃ¶ÅŸe","kÃ¶k",
      "lale","lamba","lavabo","leblebi","leke","limon","lokum",
      "manav","mantar","martÄ±","masa","masal","matematik","mavi",
      "merak","merdiven","merkez","meyve","metin","metot",
      "muz","mÃ¼ze","mÃ¼zik","mÃ¼hendis",
      "nar","narin","nane","nal","namaz","nazar",
      "okul","okuma","okyanus","ok","okÃ§u",
      "Ã¶rdek","Ã¶rnek","Ã¶rtÃ¼","Ã¶rÃ¼mcek","Ã¶zel","Ã¶zgÃ¼r","Ã¶zlem",
      "panda","pamuk","papatya","para","parmak","park","pastel","patates",
      "radar","radyo","raf","raket","rast","ray",
      "sandÄ±k","sanat","sandalye","sar","sarÄ±","sarf",
      "saat","sahil","sahne","sahip","saksÄ±","sal","salÃ§a","salon",
      "simit","simge","sincap","siyah","sistem","sÄ±cak","sÄ±ÄŸÄ±nak",
      "ÅŸapka","ÅŸarkÄ±","ÅŸeker","ÅŸemsiye","ÅŸifre","ÅŸirin","ÅŸiÅŸe","ÅŸÃ¶mine",
      "tabak","taban","tablet","tablo","tahta","tahÄ±l","tahmin",
      "tane","tanÄ±m","tanÄ±k","tank","tavan","tavuk","tavÅŸan",
      "uÃ§ak","uÃ§urtma","uÃ§urum","uÄŸur","uÅŸak",
      "Ã¼zÃ¼m","Ã¼Ã§gen","Ã¼lke","Ã¼slup","Ã¼st","Ã¼stÃ¼n",
      "vadi","valiz","vakÄ±f","vapur","varlÄ±k",
      "yaÄŸ","yaÄŸmur","yaka","yakÄ±n","yapÄ±","yaprak","yarÄ±n","yazÄ±","yazlÄ±k",
      "zaman","zambak","zarf","zayÄ±f","zeytin","zil","zirve"
    ];

    function trSort(arr, sensitivity='base'){
      return [...arr].sort((a,b)=> a.localeCompare(b, 'tr', {sensitivity}));
    }
    function byPrefix(words, prefix){ return words.filter(w => w.toLowerCase().startsWith(prefix.toLowerCase())); }
    function sample(arr, n){ const c=[...arr], o=[]; while(o.length<n && c.length){const i=Math.floor(Math.random()*c.length); o.push(c.splice(i,1)[0]);} return o; }
    function altAsamaAciklama(asama){
      if(asama==='diffFirst') return "Ä°pucu: Ä°lk harfler farklÄ±.";
      if(asama==='sameFirstDiffSecond') return "Ä°pucu: Ä°lk harf aynÄ±, ikinci farklÄ±.";
      if(asama==='sameFirst3') return "Ä°pucu: Ä°lk Ã¼Ã§ harf aynÄ±.";
      return "";
    }

    function buildWords(level, sub, count){
      const words = [...WORDS];
      if(level==='kolay' || level==='orta'){
        if(sub==='diffFirst'){
          const shuffled = sample(words, words.length);
          const chosen = []; const firsts = new Set();
          for(const w of shuffled){ const f = w[0]; if(!firsts.has(f)){ firsts.add(f); chosen.push(w); } if(chosen.length===count) break; }
          return chosen.length===count ? chosen : sample(words, count);
        } else if(sub==='sameFirstDiffSecond'){
          const groups = {};
          for(const w of words){
            if(w.length<2) continue;
            const k1 = w[0], k2 = w[1];
            groups[k1] = groups[k1] || {}; groups[k1][k2] = groups[k1][k2] || []; groups[k1][k2].push(w);
          }
          const keys = Object.keys(groups);
          while(keys.length){
            const key = keys.splice(Math.floor(Math.random()*keys.length),1)[0];
            const secondGroups = groups[key];
            const seconds = Object.keys(secondGroups).filter(k=>secondGroups[k].length>0);
            if(seconds.length >= count){
              const selectedSeconds = sample(seconds, count);
              return selectedSeconds.map(s => sample(secondGroups[s],1)[0]);
            }
          }
          return sample(words, count);
        } else {
          const prefixes = new Set();
          for(const w of words){ if(w.length>=3) prefixes.add(w.slice(0,3).toLowerCase()); }
          const prefArr = [...prefixes];
          while(prefArr.length){
            const pref = prefArr.splice(Math.floor(Math.random()*prefArr.length),1)[0];
            const cands = byPrefix(words, pref);
            if(cands.length >= count) return sample(cands, count);
          }
          return sample(words, count);
        }
      } else {
        // zor & Ã§ok zor: ilk harf aynÄ±
        const firsts = [...new Set(words.map(w=>w[0]))];
        while(firsts.length){
          const f = firsts.splice(Math.floor(Math.random()*firsts.length),1)[0];
          const cands = words.filter(w=>w[0]===f);
          if(cands.length >= count) return sample(cands, count);
        }
        return sample(words, count);
      }
    }

    function getConfig(){
      const seviye = document.getElementById('seviye').value;
      const alt = document.getElementById('altAsama').value;
      const sensitivity = document.getElementById('duyarlilik').value;
      let adet = seviye==='kolay'?2: seviye==='orta'?3: seviye==='zor'?4:5;
      let sub = (seviye==='kolay'||seviye==='orta') ? alt : 'sameFirstDiffSecond';
      return { seviye, sub, adet, sensitivity };
    }

    function renderGorev(){
      const { seviye, sub } = getConfig();
      let desc = "Ãœstteki kelimeleri alttaki kutulara <em>soldan saÄŸa</em> doÄŸru <strong>sÃ¶zlÃ¼k sÄ±rasÄ±na</strong> gÃ¶re yerleÅŸtir.";
      if(seviye==='kolay' || seviye==='orta'){ desc += " " + altAsamaAciklama(sub); }
      else if(seviye==='zor'){ desc += " Ä°pucu: TÃ¼m kelimelerin <strong>ilk harfi aynÄ±</strong>."; }
      else { desc += " Ä°pucu: <strong>5 kelime</strong> ve hepsinin ilk harfi aynÄ±."; }
      document.getElementById('gorev').innerHTML = `<strong>GÃ¶rev:</strong> ${desc}`;
    }

    function makeChip(word){
      const b = document.createElement('button');
      b.type = "button";
      b.className = "chip px-3 py-2 rounded-xl font-bold bg-white border border-slate-300 text-slate-800 shadow hover:shadow-md active:scale-95";
      b.textContent = word;
      b.draggable = true;
      b.dataset.word = word;
      b.addEventListener('dragstart', (e)=>{
        e.dataTransfer.setData('text/plain', word);
        b.classList.add('dragging');
      });
      b.addEventListener('dragend', ()=> b.classList.remove('dragging'));
      return b;
    }

    function clear(el){ while(el.firstChild) el.removeChild(el.firstChild); }

    let currentWords=[], correctOrder=[];
    function renderGame(words){
      const kaynak = document.getElementById('kaynak');
      const hedef = document.getElementById('hedef');
      clear(kaynak); clear(hedef);

      // kaynak kelimeler
      const shuffled = [...words];
      for(let i=shuffled.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [shuffled[i],shuffled[j]]=[shuffled[j],shuffled[i]]; }
      shuffled.forEach(w => kaynak.appendChild(makeChip(w)));

      // hedef slotlar
      for(let i=0;i<words.length;i++){
        const slot = document.createElement('div');
        slot.className = "drop-slot bg-slate-50 border-2 border-dashed border-slate-300 rounded-xl p-2 flex items-center justify-center min-w-[100px]";
        slot.dataset.index = i;
        slot.addEventListener('dragover', (e)=>{ e.preventDefault(); slot.classList.add('drop-active'); });
        slot.addEventListener('dragleave', ()=> slot.classList.remove('drop-active'));
        slot.addEventListener('drop', (e)=>{
          e.preventDefault();
          slot.classList.remove('drop-active');
          const word = e.dataTransfer.getData('text/plain');
          if(!word) return;
          const existing = slot.querySelector('.chip');
          if(existing){ document.getElementById('kaynak').appendChild(existing); }
          const dragged = document.querySelector(`.chip.dragging`) || Array.from(document.querySelectorAll('.chip')).find(c=>c.dataset.word===word);
          if(dragged && dragged.parentElement !== slot){ slot.appendChild(dragged); }
        });
        hedef.appendChild(slot);
      }

      // kaynak alanÄ±na geri bÄ±rakma
      kaynak.addEventListener('dragover', (e)=>{ e.preventDefault(); kaynak.classList.add('drop-active'); });
      kaynak.addEventListener('dragleave', ()=> kaynak.classList.remove('drop-active'));
      kaynak.addEventListener('drop', (e)=>{
        e.preventDefault();
        kaynak.classList.remove('drop-active');
        const word = e.dataTransfer.getData('text/plain');
        const dragged = document.querySelector(`.chip.dragging`) || Array.from(document.querySelectorAll('.chip')).find(c=>c.dataset.word===word);
        if(dragged){ kaynak.appendChild(dragged); }
      });
    }

    function yeniSoru(forceLevel){
      const cfg = getConfig();
      const lvl = forceLevel || cfg.seviye;
      const words = buildWords(lvl, cfg.sub, cfg.adet);
      currentWords = words;
      correctOrder = trSort(words, cfg.sensitivity);
      renderGorev();
      renderGame(words);
      document.getElementById('sonuc').textContent = "";
    }

    function kontrolEt(){
      const slots = Array.from(document.querySelectorAll('#hedef .drop-slot'));
      const filled = slots.map(s => s.querySelector('.chip')?.dataset.word || null);
      if(filled.some(x=>x===null)){
        showMsg("â„¹ï¸ TÃ¼m kutularÄ± doldurmalÄ±sÄ±n.", "text-amber-600");
        return;
      }
      const ok = filled.every((w,i)=> w===correctOrder[i]);
      if(ok) showMsg("âœ… Harika! DoÄŸru sÃ¶zlÃ¼k sÄ±rasÄ±.", "text-emerald-600");
      else showMsg("âŒ HenÃ¼z olmadÄ±. Yeniden dene ya da 'Ã‡Ã¶zÃ¼mÃ¼ GÃ¶ster' de.", "text-rose-600");
    }

    function cozumGoster(){
      const kaynak = document.getElementById('kaynak');
      const slots = Array.from(document.querySelectorAll('#hedef .drop-slot'));
      document.querySelectorAll('.chip').forEach(ch => kaynak.appendChild(ch));
      correctOrder.forEach((w, i)=>{
        const slot = slots[i];
        const chip = Array.from(kaynak.children).find(c => c.dataset.word===w);
        if(chip) slot.appendChild(chip);
      });
      showMsg("ğŸ“˜ Ã‡Ã¶zÃ¼m yerleÅŸtirildi. Ä°stersen 'KaynaÄŸÄ± KarÄ±ÅŸtÄ±r' ile tekrar dene.", "text-sky-600");
    }

    function temizleSlots(){
      const kaynak = document.getElementById('kaynak');
      document.querySelectorAll('#hedef .chip').forEach(ch => kaynak.appendChild(ch));
      showMsg("ğŸ§¹ Kutular temizlendi.", "text-slate-600");
    }

    function showMsg(text, cls){
      const s = document.getElementById('sonuc');
      s.textContent = text;
      s.className = "mt-4 text-center text-lg font-bold " + cls;
    }

    // Events
    document.getElementById('btnYeni').addEventListener('click', ()=> yeniSoru());
    document.getElementById('btnYeni2').addEventListener('click', ()=> yeniSoru());
    document.getElementById('btnKaristir').addEventListener('click', ()=>{
      const kaynak = document.getElementById('kaynak');
      const chips = Array.from(kaynak.children);
      for(let i=chips.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); kaynak.insertBefore(chips[j], chips[i]); [chips[i], chips[j]]=[chips[j], chips[i]]; }
    });
    document.getElementById('btnTemizle').addEventListener('click', temizleSlots);
    document.getElementById('btnKontrol').addEventListener('click', kontrolEt);
    document.getElementById('btnCozum').addEventListener('click', cozumGoster);

    document.getElementById('seviye').addEventListener('change', ()=>{
      const v=document.getElementById('seviye').value;
      document.getElementById('altAsama').disabled = !(v==='kolay'||v==='orta');
      yeniSoru(v);
    });
    document.getElementById('altAsama').addEventListener('change', ()=> yeniSoru());
    document.getElementById('duyarlilik').addEventListener('change', ()=> yeniSoru());

    yeniSoru();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kelime SÄ±ralama Oyunu</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { -webkit-tap-highlight-color: transparent; }
    body { overscroll-behavior: none; touch-action: manipulation; }
    .draggable.dragging { opacity: .6; transform: scale(.98); }
    .drop-target { outline: 2px dashed rgba(99,102,241,.6); outline-offset: 4px; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-400 via-violet-400 to-pink-400">
  <div class="max-w-4xl mx-auto px-4 py-6">
    <header class="mb-4 flex items-center justify-between gap-3">
      <h1 class="text-2xl md:text-3xl font-extrabold text-white drop-shadow">ğŸ”¤ Kelime SÄ±ralama Oyunu</h1>
      <a href="index.html" class="hidden md:inline-flex items-center gap-2 px-4 py-2 rounded-full text-white font-bold bg-black/20 hover:bg-black/30">â† Ana Sayfa</a>
    </header>

    <!-- Kontroller -->
    <section class="bg-white/95 rounded-2xl shadow-xl p-4 md:p-5 mb-5">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
        <div class="flex flex-col">
          <label class="text-sm text-gray-600 mb-1 font-semibold">Seviye</label>
          <select id="seviye" class="px-4 py-3 rounded-xl border-2 border-violet-300 focus:outline-none focus:ring-2 focus:ring-violet-400">
            <option value="kolay">Kolay (2 kelime)</option>
            <option value="orta">Orta (3 kelime)</option>
            <option value="zor">Zor (4 kelime)</option>
            <option value="cokzor">Ã‡ok Zor (5 kelime)</option>
          </select>
        </div>

        <div class="flex flex-col">
          <label class="text-sm text-gray-600 mb-1 font-semibold">Alt AÅŸama (Kolay/Orta)</label>
          <select id="altAsama" class="px-4 py-3 rounded-xl border-2 border-emerald-300 focus:outline-none focus:ring-2 focus:ring-emerald-400">
            <option value="diffFirst">1) Ä°lk harfler farklÄ±</option>
            <option value="sameFirstDiffSecond">2) Ä°lk harf aynÄ±, ikinci farklÄ±</option>
            <option value="sameFirst3">3) Ä°lk Ã¼Ã§ harf aynÄ±</option>
          </select>
          <p class="text-xs text-gray-500 mt-1">Zor / Ã‡ok Zor seviyede alt aÅŸama otomatik belirlenir.</p>
        </div>

        <div class="flex flex-col">
          <label class="text-sm text-gray-600 mb-1 font-semibold">DuyarlÄ±lÄ±k</label>
          <select id="duyarlilik" class="px-4 py-3 rounded-xl border-2 border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-400">
            <option value="base">Harf farkÄ± yok (A=a)</option>
            <option value="variant">BÃ¼yÃ¼k/KÃ¼Ã§Ã¼k duyarlÄ±</option>
          </select>
        </div>

        <div class="flex items-end gap-2">
          <button id="btnYeni" class="flex-1 px-4 py-3 rounded-xl font-bold bg-violet-600 text-white active:bg-violet-700">Yeni Soru</button>
          <button id="btnKaristir" class="px-4 py-3 rounded-xl font-bold bg-fuchsia-600 text-white active:bg-fuchsia-700">KarÄ±ÅŸtÄ±r</button>
        </div>
      </div>
    </section>

    <!-- GÃ¶rev Bilgisi -->
    <section class="bg-white rounded-2xl shadow-2xl p-4 md:p-6 mb-5">
      <div id="gorev" class="text-gray-700 text-sm md:text-base">
        <strong>GÃ¶rev:</strong> Kelimeleri <em>sÃ¶zlÃ¼k sÄ±rasÄ±na</em> gÃ¶re sÃ¼rÃ¼kleyip bÄ±rakÄ±n.
      </div>
    </section>

    <!-- Oyun AlanÄ± -->
    <section class="bg-white rounded-2xl shadow-2xl p-4 md:p-6">
      <ul id="liste" class="space-y-3"></ul>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-5">
        <button id="btnKontrol" class="px-4 py-3 rounded-xl font-bold bg-emerald-600 text-white active:bg-emerald-700">Kontrol Et</button>
        <button id="btnCozum" class="px-4 py-3 rounded-xl font-bold bg-amber-500 text-white active:bg-amber-600">Ã‡Ã¶zÃ¼mÃ¼ GÃ¶ster</button>
        <button id="btnKararli" class="px-4 py-3 rounded-xl font-bold bg-sky-600 text-white active:bg-sky-700">Rastgele KarÄ±ÅŸÄ±k</button>
        <button id="btnYeni2" class="px-4 py-3 rounded-xl font-bold bg-indigo-600 text-white active:bg-indigo-700">Yeni Soru</button>
      </div>

      <div id="sonuc" class="mt-4 text-center text-lg font-bold"></div>
    </section>

    <footer class="text-center text-white/90 mt-6">âœ¨ TÃ¼rkÃ§e sÃ¶zlÃ¼k sÄ±rasÄ±: <code>localeCompare('tr')</code> ile kontrol edilir. âœ¨</footer>
  </div>

  <script>
    // --- Kelime BankasÄ± ---
    const WORDS = [
      "araba","armut","arÄ±","arka","arÅŸiv","artÄ±","aÄŸaÃ§","aÄŸÄ±r","aÄŸrÄ±","aÄŸÄ±z","alÄ±ÅŸ","altÄ±n","ayak","ayÄ±n","ayna","ayva",
      "bal","balÄ±k","balon","balkon","balkÃ¶pÃ¼ÄŸÃ¼","bambaÅŸka","bambu","bana","banko","banka","baÅŸ","baÅŸak","baÅŸarÄ±","baÅŸlÄ±k","baÅŸucu","baÅŸvuru","baÅŸÃ¶rtÃ¼",
      "biber","bilet","bina","bir","birlik","birinci","biskÃ¼vi","bisiklet","bitki",
      "can","cana","canlÄ±","cansÄ±z","cami","cam","cambaz","camgÃ¶beÄŸi","cankurtaran","canavar","ceviz","ceza","cezve",
      "Ã§adÄ±r","Ã§akÄ±l","Ã§akmak","Ã§anta","Ã§arÅŸÄ±","Ã§arpÄ±m","Ã§arÅŸaf","Ã§ay","Ã§izgi","Ã§iÃ§ek","Ã§iÄŸdem","Ã§ikolata","Ã§ilek","Ã§ok","Ã§okluk",
      "daÄŸ","dahi","dahil","dakika","dal","dalga","dama","damla","dana","dantel","darbe","darÄ±",
      "deÄŸer","denk","deniz","dere","dergi","dert","dev","devam","devre","devrim","depo","ders","derin",
      "el","elbise","elma","elmas","elektrik","elek","eleman","elim","eller","elif",
      "fener","fen","fikir","fidan","fil","filiz","fincan","fÄ±rÄ±n","fÄ±stÄ±k","fÄ±rÃ§a","fizik",
      "gemi","gemici","gemlik","genel","geniÅŸ","gerÃ§ek","gereÃ§","gergi","gezi","gezegen","gÃ¶l","gÃ¶kyÃ¼zÃ¼","gÃ¶z","gÃ¶zlÃ¼k","gÃ¶Ã§","gÃ¶ÄŸÃ¼s","gÃ¶vde",
      "harf","harita","hava","havuÃ§","hayal","hayat","hazÄ±r","hÄ±z","hÄ±zlÄ±","his","hiÃ§","hindi","hikaye","hile","hobi","horoz",
      "Ä±ÅŸÄ±k","Ä±spanak","Ä±sÄ±","Ä±sÄ±rgan","Ä±zgara","Ä±rmak",
      "inek","insan","inÅŸaat","ip","iplik","iskele","isim","istasyon","istanbul","iz","izci","izlenim",
      "jandarma","jilet","jÃ¼ri","japon","jakar","jaguar",
      "kalem","kale","kalp","kaldÄ±rÄ±m","kalkÄ±ÅŸ","kalkmak","kalÄ±p","kalkan","kalÄ±n","kaleÃ§i","kalorifer",
      "kamÄ±ÅŸ","kamera","kamyon","kanat","kangal","kanun","kar","karar","karanfil","karavan","karÄ±nca","karÄ±n","kariyer","kargo","kargÄ±",
      "kardeÅŸ","kare","karlÄ±k","karma","karne","karpuz","karÅŸÄ±","kart","kartal","karton",
      "kasap","kasa","kasÄ±rga","kasket","katalog","katÄ±","katman","katkÄ±",
      "kedi","kefil","kek","kelebek","kelle","kemik","keman","kement",
      "kÄ±ÅŸ","kÄ±sa","kÄ±sÄ±m","kÄ±sÄ±t","kÄ±r","kÄ±rgÄ±n","kÄ±rmÄ±zÄ±","kÄ±rlangÄ±Ã§","kÄ±rk","kÄ±rÄ±cÄ±","kÄ±rÄ±ntÄ±","kÄ±rlent",
      "kiÅŸi","kil","kilim","kilo","kilit","kiler","kim","kimya","kimlik","kimin","kir","kiraz","kirpi","kirli","kiralÄ±k",
      "kitap","kitle","kol","kola","koli","kolye","kolay","koltuk","konu","konuk","konut","konum","konser","kontrol",
      "kÃ¶y","kÃ¶pek","kÃ¶prÃ¼","kÃ¶mÃ¼r","kÃ¶fte","kÃ¶r","kÃ¶rÃ¼k","kÃ¶ÅŸe","kÃ¶k","kÃ¶kten",
      "lale","lamba","lamel","lavabo","leblebi","leke","levrek","leylek","limon","lokum","lodos",
      "manav","manga","mantar","martÄ±","masa","masal","maske","matematik","mavi","maymun",
      "merak","merdiven","merkez","meyve","metin","metot","mezun",
      "muz","mÃ¼ze","mÃ¼zik","mÃ¼ÅŸteri","mÃ¼hendis","mÃ¼hÃ¼r","mÃ¼fredat",
      "nar","narin","nane","naylon","nakÄ±ÅŸ","namlu","nal","namaz","nazar",
      "okul","okuma","okyanus","ok","okÃ§u","okÅŸamak","okyanusya",
      "Ã¶rdek","Ã¶rnek","Ã¶rtÃ¼","Ã¶rÃ¼mcek","Ã¶zel","Ã¶zgÃ¼r","Ã¶zgÃ¼n","Ã¶zlem","Ã¶zdek",
      "pano","panda","pamuk","panjur","papatya","para","parmak","park","pastel","patates","pazar",
      "radar","radyo","raf","rahle","raket","rast","ray",
      "sandÄ±k","sanat","sandalye","sandalet","sanayi","sar","sarma","sarhoÅŸ","sarÄ±","sarf",
      "saat","sahil","sahne","sahip","saksÄ±","sal","salgÄ±","salata","salÄ±ncak","salÃ§a","salon",
      "simit","simge","sincap","siyah","sistem","sÄ±cak","sÄ±zma","sÄ±ÄŸÄ±nak","sÄ±ÄŸÄ±rcÄ±k","sÄ±ÄŸ",
      "ÅŸal","ÅŸapka","ÅŸarj","ÅŸarkÄ±","ÅŸart","ÅŸeker","ÅŸelale","ÅŸemsiye","ÅŸifon","ÅŸifre","ÅŸirin","ÅŸiÅŸe","ÅŸÃ¶mine","ÅŸofÃ¶r",
      "taba","tabak","taban","tablet","tablo","tabur","tahta","tahÄ±l","tahmin",
      "tane","tanÄ±m","tanÄ±k","tank","tavan","tavuk","tavÅŸan","tayfa",
      "uÃ§ak","uÃ§","uÃ§urtma","uÃ§urum","uÃ§ucu","uÄŸur","uÄŸultu","uÅŸak",
      "Ã¼zÃ¼m","Ã¼Ã§gen","Ã¼lke","Ã¼slup","Ã¼st","Ã¼stÃ¼n",
      "vadi","valiz","vali","vakÄ±f","vakum","vapur","varil","varlÄ±k","varis",
      "yaÄŸ","yaÄŸmur","yaka","yakÄ±t","yaklaÅŸÄ±m","yakÄ±n","yakut","yalnÄ±z","yamalÄ±","yapÄ±","yaprak","yarÄ±n","yazÄ±","yazlÄ±k",
      "zaman","zambak","zarf","zarif","zayÄ±f","zeytin","zil","zirve","zurna"
    ];

    function trSort(arr, sensitivity='base'){
      return [...arr].sort((a,b)=> a.localeCompare(b, 'tr', {sensitivity}));
    }
    function byPrefix(words, prefix){ return words.filter(w => w.toLowerCase().startsWith(prefix.toLowerCase())); }
    function sample(arr, n){ const c=[...arr], o=[]; while(o.length<n && c.length){const i=Math.floor(Math.random()*c.length); o.push(c.splice(i,1)[0]);} return o; }
    function altAsamaAciklama(asama){
      if(asama==='diffFirst') return "Ä°pucu: Ä°lk harfler farklÄ± seÃ§ildi.";
      if(asama==='sameFirstDiffSecond') return "Ä°pucu: Ä°lk harf aynÄ±, ikinci harf farklÄ±.";
      if(asama==='sameFirst3') return "Ä°pucu: Ä°lk Ã¼Ã§ harf aynÄ±.";
      return "";
    }

    function buildWords(level, sub, count){
      const words = [...WORDS];
      if(level==='kolay' || level==='orta'){
        if(sub==='diffFirst'){
          const shuffled = sample(words, words.length);
          const chosen = []; const firsts = new Set();
          for(const w of shuffled){ const f = w[0]; if(!firsts.has(f)){ firsts.add(f); chosen.push(w); } if(chosen.length===count) break; }
          return chosen.length===count ? chosen : sample(words, count);
        } else if(sub==='sameFirstDiffSecond'){
          const groups = {};
          for(const w of words){
            if(w.length<2) continue;
            const k1 = w[0], k2 = w[1];
            groups[k1] = groups[k1] || {}; groups[k1][k2] = groups[k1][k2] || []; groups[k1][k2].push(w);
          }
          const keys = Object.keys(groups);
          while(keys.length){
            const key = keys.splice(Math.floor(Math.random()*keys.length),1)[0];
            const secondGroups = groups[key];
            const seconds = Object.keys(secondGroups).filter(k=>secondGroups[k].length>0);
            if(seconds.length >= count){
              const selectedSeconds = sample(seconds, count);
              return selectedSeconds.map(s => sample(secondGroups[s],1)[0]);
            }
          }
          return sample(words, count);
        } else {
          const prefixes = new Set();
          for(const w of words){ if(w.length>=3) prefixes.add(w.slice(0,3).toLowerCase()); }
          const prefArr = [...prefixes];
          while(prefArr.length){
            const pref = prefArr.splice(Math.floor(Math.random()*prefArr.length),1)[0];
            const cands = byPrefix(words, pref);
            if(cands.length >= count) return sample(cands, count);
          }
          return sample(words, count);
        }
      } else {
        // zor & Ã§ok zor: ilk harf aynÄ±
        const firsts = [...new Set(words.map(w=>w[0]))];
        while(firsts.length){
          const f = firsts.splice(Math.floor(Math.random()*firsts.length),1)[0];
          const cands = words.filter(w=>w[0]===f);
          if(cands.length >= count) return sample(cands, count);
        }
        return sample(words, count);
      }
    }

    function getConfig(){
      const seviye = document.getElementById('seviye').value;
      const alt = document.getElementById('altAsama').value;
      const sensitivity = document.getElementById('duyarlilik').value;
      let adet = seviye==='kolay'?2: seviye==='orta'?3: seviye==='zor'?4:5;
      let sub = (seviye==='kolay'||seviye==='orta') ? alt : 'sameFirstDiffSecond';
      return { seviye, sub, adet, sensitivity };
    }

    function renderGorev(){
      const { seviye, sub } = getConfig();
      let desc = "Kelimeleri <em>sÃ¶zlÃ¼k sÄ±rasÄ±na</em> gÃ¶re dizin.";
      if(seviye==='kolay' || seviye==='orta'){ desc += " " + altAsamaAciklama(sub); }
      else if(seviye==='zor'){ desc += " Ä°pucu: TÃ¼m kelimelerin <strong>ilk harfi aynÄ±</strong>."; }
      else { desc += " Ä°pucu: <strong>5 kelime</strong> ve hepsinin ilk harfi aynÄ±."; }
      document.getElementById('gorev').innerHTML = `<strong>GÃ¶rev:</strong> ${desc}`;
    }

    function renderList(words){
      const liste = document.getElementById('liste');
      liste.innerHTML = '';
      const shuffled = [...words];
      for(let i=shuffled.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [shuffled[i],shuffled[j]]=[shuffled[j],shuffled[i]]; }
      shuffled.forEach((w)=>{
        const li = document.createElement('li');
        li.className = "draggable bg-gradient-to-tr from-white to-slate-50 border border-slate-200 rounded-xl p-3 flex items-center justify-between gap-3 cursor-grab";
        li.setAttribute('draggable', 'true');
        li.dataset.value = w;
        li.innerHTML = `<span class="font-bold text-lg text-slate-700">${w}</span><span class="text-slate-400 text-sm select-none">tut-sÃ¼rÃ¼kle</span>`;
        liste.appendChild(li);
      });

      let dragged=null;
      liste.querySelectorAll('.draggable').forEach(el=>{
        el.addEventListener('dragstart', e=>{ dragged=el; el.classList.add('dragging'); e.dataTransfer.effectAllowed='move'; });
        el.addEventListener('dragend', ()=>{ dragged=null; el.classList.remove('dragging'); liste.querySelectorAll('.draggable').forEach(x=>x.classList.remove('drop-target')); });
        el.addEventListener('dragover', e=>{ e.preventDefault(); const t=e.currentTarget; if(t===dragged) return; t.classList.add('drop-target'); });
        el.addEventListener('dragleave', e=>{ e.currentTarget.classList.remove('drop-target'); });
        el.addEventListener('drop', e=>{
          e.preventDefault();
          const t=e.currentTarget; t.classList.remove('drop-target');
          if(!dragged || dragged===t) return;
          const items = Array.from(liste.children);
          const di = items.indexOf(dragged), ti = items.indexOf(t);
          if(di<ti) liste.insertBefore(dragged, t.nextSibling); else liste.insertBefore(dragged, t);
        });
      });
    }

    let currentWords=[], correctOrder=[];
    function yeniSoru(forceLevel){
      const cfg = getConfig();
      const lvl = forceLevel || cfg.seviye;
      const words = buildWords(lvl, cfg.sub, cfg.adet);
      currentWords = words;
      correctOrder = trSort(words, cfg.sensitivity);
      renderGorev();
      renderList(words);
      document.getElementById('sonuc').textContent = "";
    }

    function kontrolEt(){
      const items = Array.from(document.querySelectorAll('#liste .draggable'));
      const userOrder = items.map(li=> li.dataset.value);
      const ok = userOrder.every((w,i)=> w===correctOrder[i]);
      const sonuc = document.getElementById('sonuc');
      if(ok){ sonuc.textContent="âœ… Harika! DoÄŸru sÃ¶zlÃ¼k sÄ±rasÄ±."; sonuc.className="mt-4 text-center text-lg font-bold text-emerald-600"; }
      else { sonuc.textContent="âŒ HenÃ¼z olmadÄ±. Biraz daha dene ya da 'Ã‡Ã¶zÃ¼mÃ¼ GÃ¶ster' de."; sonuc.className="mt-4 text-center text-lg font-bold text-rose-600"; }
    }
    function cozumGoster(){ renderList(correctOrder); const s=document.getElementById('sonuc'); s.textContent="ğŸ“˜ Ã‡Ã¶zÃ¼m gÃ¶rÃ¼ntÃ¼lendi. 'KarÄ±ÅŸtÄ±r' ile tekrar dene."; s.className="mt-4 text-center text-lg font-bold text-sky-600"; }

    document.getElementById('btnYeni').addEventListener('click', ()=> yeniSoru());
    document.getElementById('btnYeni2').addEventListener('click', ()=> yeniSoru());
    document.getElementById('btnKaristir').addEventListener('click', ()=> renderList(currentWords));
    document.getElementById('btnKararli').addEventListener('click', ()=>{
      const seviye=document.getElementById('seviye').value;
      if(seviye==='kolay'||seviye==='orta'){
        const asamalar=['diffFirst','sameFirstDiffSecond','sameFirst3'];
        document.getElementById('altAsama').value = asamalar[Math.floor(Math.random()*asamalar.length)];
      }
      const senses=['base','variant']; document.getElementById('duyarlilik').value = senses[Math.floor(Math.random()*senses.length)];
      yeniSoru();
    });
    document.getElementById('btnKontrol').addEventListener('click', kontrolEt);
    document.getElementById('btnCozum').addEventListener('click', cozumGoster);
    document.getElementById('seviye').addEventListener('change', ()=>{
      const v=document.getElementById('seviye').value;
      document.getElementById('altAsama').disabled = !(v==='kolay'||v==='orta');
      yeniSoru(v);
    });
    document.getElementById('altAsama').addEventListener('change', ()=> yeniSoru());
    document.getElementById('duyarlilik').addEventListener('change', ()=> yeniSoru());

    yeniSoru();
  </script>
</body>
</html>
